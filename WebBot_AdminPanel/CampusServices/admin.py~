from django.contrib import admin
from django.utils.html import format_html

from .models import Service, CampusService

class ServiceAdmin(admin.ModelAdmin):
    list_display = ('name',)  # Поля для отображения в списке
    search_fields = ('name',)  # Поиск по имени

admin.site.register(Service, ServiceAdmin)

class CampusServiceAdmin(admin.ModelAdmin):
    list_display = ('name', 'service_type', 'contact', 'service_status')  # Поля для отображения в списке
    search_fields = ('name', 'service_type', 'contact')  # Поиск по этим полям
    list_filter = ('service_type',)  # Фильтрация по типу сервиса

    actions = ['mark_as_active', 'archive_services']

    def mark_as_active(self, request, queryset):
        queryset.update(is_active=True)
        self.message_user(request, "Selected services have been marked as active.")

    def archive_services(self, request, queryset):
        queryset.update(is_archived=True)
        self.message_user(request, "Selected services have been archived.")

    mark_as_active.short_description = "Mark selected as active"
    archive_services.short_description = "Archive selected services"

    def service_status(self, obj):
        if obj.is_active:
            return format_html('<span style="color: green;">Active</span>')
        else:
            return format_html('<span style="color: red;">Inactive</span>')

    service_status.short_description = 'Status'

    fieldsets = (
        ('Basic Information', {
            'fields': ('name', 'description')
        }),
        ('Service Details', {
            'fields': ('service_type', 'contact'),
        }),
    )


admin.site.register(CampusService, CampusServiceAdmin)
